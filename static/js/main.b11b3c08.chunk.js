(this["webpackJsonpgreenvisible-cloak-web"]=this["webpackJsonpgreenvisible-cloak-web"]||[]).push([[0],{26:function(e,t,n){e.exports=n(41)},31:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(23),i=n.n(c),o=(n(31),n(16)),l=n(7),u=n(10),s=n(13),m=n(11),d=n(12),v=(n(32),n(5)),b=function(e){function t(e,n,a,r){var c;return Object(u.a)(this,t),(c=Object(s.a)(this,Object(m.a)(t).call(this,e,n,a))).velocity=void 0,c.velocity=r,c}return Object(d.a)(t,e),t}(v.h),h=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)(),i=Object(a.useRef)(),l=Object(a.useRef)(),u=Object(a.useRef)(),s=Object(a.useCallback)((function(){var a,r,i=(null===(a=e.current)||void 0===a?void 0:a.clientWidth)||0,o=(null===(r=e.current)||void 0===r?void 0:r.clientHeight)||0;t.current=new v.f,n.current=new v.c(75,i/o,.1,1e3),n.current.position.z=5,c.current=new v.i,c.current.setSize(i,o),e.current&&e.current.appendChild(c.current.domElement)}),[]),m=Object(a.useCallback)((function(){u.current=new v.b;for(var e=new v.e({color:16777215,size:3,map:(new v.g).load("./images/glow-particle-1.png"),blending:v.a,transparent:!0,depthTest:!1}),n=0;n<1500;n++){var a=500*Math.random()-250,r=500*Math.random()-250,c=500*Math.random()-250,i=new b(a,r,c,new v.h(.1*Math.random()-.05,.1*Math.random()-.05,.1*Math.random()-.05));u.current.vertices.push(i)}l.current=new v.d(u.current,e),t.current&&t.current.add(l.current)}),[]),d=Object(a.useCallback)((function(){var a,r,o=(null===(a=e.current)||void 0===a?void 0:a.clientWidth)||0,s=(null===(r=e.current)||void 0===r?void 0:r.clientHeight)||0;if(l.current&&u.current){l.current.rotation.x=.005,l.current.rotation.y=.005,l.current.rotation.z=.005;for(var m=1500;m--;){var v,b=null===(v=u.current)||void 0===v?void 0:v.vertices[m];b&&(b.x<=0&&(b.velocity.x=-1*b.velocity.x),b.y<=0&&(b.velocity.y=-1*b.velocity.y),b.z<=-100&&(b.velocity.z=-1*b.velocity.z),b.x>=o&&(b.velocity.x=-1*b.velocity.x),b.y>=s&&(b.velocity.y=-1*b.velocity.y),b.z>=100&&(b.velocity.z=-1*b.velocity.z),b.x+=b.velocity.x,b.y+=b.velocity.y,b.z+=b.velocity.z)}u.current.verticesNeedUpdate=!0}c.current&&c.current.render(t.current,n.current),i.current=window.requestAnimationFrame(d)}),[]),h=Object(a.useCallback)((function(){var t,a,r=(null===(t=e.current)||void 0===t?void 0:t.clientWidth)||0,i=(null===(a=e.current)||void 0===a?void 0:a.clientHeight)||0;c.current&&c.current.setSize(r,i),n.current&&(n.current.aspect=r/i,n.current.updateProjectionMatrix())}),[]);return Object(a.useEffect)((function(){return s(),m(),d(),window.addEventListener("resize",h),function(){window.removeEventListener("resize",h),i.current&&window.cancelAnimationFrame(i.current)}}),[m,s,d,h]),r.a.createElement("div",{ref:e,className:"home-container"},r.a.createElement("div",{className:"title-container"},r.a.createElement("h1",{className:"title"},"Harry Potter's ",r.a.createElement("br",null),"The Invisible Cloak")),r.a.createElement(o.b,{to:"/main",style:{textDecoration:"none"}},r.a.createElement("h3",{className:"animated-try"},"Try it")))},f=n(14),E=(n(38),n(20)),y=n(0),w=(n(39),{min:{h:220,s:50,v:50},max:{h:270,s:100,v:100}}),p={min:{h:110,s:30,v:94},max:{h:160,s:27,v:32}},g=function(e,t,n){return t<=e&&e<=n};function j(e,t,n,a){var r=function(e,t,n){var a,r,c,i=e/255,o=t/255,l=n/255,u=0,s=0,m=Math.max(i,o,l),d=m-Math.min(i,o,l),v=function(e){return(m-e)/6/d+.5},b=function(e){return Math.round(100*e)/100};return 0===d?u=s=0:(s=d/m,a=v(i),r=v(o),c=v(l),i===m?u=c-r:o===m?u=1/3+a-c:l===m&&(u=2/3+r-a),u<0?u+=1:u>1&&(u-=1)),{h:Math.round(360*u),s:b(100*s),v:b(100*m)}}(e,t,n),c=255;return g(r.h,a.min.h,a.max.h)&&(c=0),c}var O=Object(a.forwardRef)((function(e,t){var n=e.currentStep,c=e.setCurrentStep,i=e.selectedChromaColor,o=e.handleBack,l=e.videoProps.video,u=Object(a.useRef)(null),s=Object(a.useRef)(null),m=Object(a.useCallback)((function(){var e;u.current&&s.current&&l&&(s.current.width=l.videoWidth,s.current.height=l.videoHeight,u.current.width=l.videoWidth,u.current.height=l.videoHeight);var t=null===(e=s.current)||void 0===e?void 0:e.getContext("2d");if(l&&t&&(t.drawImage(l,0,0,l.videoWidth,l.videoHeight),3===n)){for(var a=t.getImageData(0,0,l.videoWidth,l.videoHeight),r=a.data.length/4,c=0;c<r;c++){var o=j(a.data[4*c+0],a.data[4*c+1],a.data[4*c+2],i);a.data[4*c+3]=o}t.putImageData(a,0,0)}}),[l,n,i]),d=Object(a.useCallback)((function(){try{m()}catch(t){console.log(t)}var e=window.requestAnimationFrame(d);return function(){window.cancelAnimationFrame(e)}}),[m]);Object(a.useEffect)((function(){d()}),[d,l]);var v=Object(a.useCallback)((function(){if(u.current&&s.current&&l){var e=u.current.getContext("2d");e&&(e.drawImage(l,0,0),s.current.setAttribute("style","background-image:url(".concat(u.current.toDataURL("image/webp"),");")))}}),[l]);return r.a.createElement(y.b.Provider,{value:{style:{verticalAlign:"middle"},size:"1.3rem"}},r.a.createElement("div",null,r.a.createElement("button",{className:"back-button",onClick:o},r.a.createElement(E.a,null)),r.a.createElement("video",{autoPlay:!0,ref:t,className:"video-container",style:{display:"none"}}),1===n&&r.a.createElement("button",{className:"capture-button",onClick:function(){c(2),v()}},r.a.createElement(E.b,null)),r.a.createElement("div",{style:{display:"block"}},r.a.createElement("canvas",{className:"video-canvas",ref:s})),r.a.createElement("div",{style:{display:"none"}},r.a.createElement("canvas",{className:"video-canvas",ref:u}))))})),k=(n(40),function(e){var t=e.children;return r.a.createElement("div",{className:"instruction-container"},t)});var C=function(){var e=Object(a.useState)(0),t=Object(f.a)(e,2),n=t[0],c=t[1],i=!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),o=Object(a.useRef)(null),l=Object(a.useState)(!1),u=Object(f.a)(l,2),s=u[0],m=u[1],d=Object(a.useState)(0),v=Object(f.a)(d,2),b=v[0],h=v[1],E=Object(a.useState)(p),y=Object(f.a)(E,2),g=y[0],j=y[1];i||alert("This browser does not support webcam, Please use other browsers instead (Chrome, Firefox, etc.)");var C=function(){h(0)},x=function(){c((function(e){return e-1<0?0:e-1}))};Object(a.useEffect)((function(){if(1===n){h(1);navigator.mediaDevices.getUserMedia({video:{width:{min:640,ideal:1280},height:{min:480,ideal:720}}}).then((function(e){o.current&&(o.current.srcObject=e)})).catch((function(e){alert("Your webcam does not meet the minimum requirements. \n".concat(e.name,": ").concat(e.constraint)),m(!0)}))}else 2===n&&h(2)}),[n]);var N=function(e){return function(){j(e),c(3),C()}};return r.a.createElement(r.a.Fragment,null,0===n&&r.a.createElement("div",{className:"main-container"},r.a.createElement("h3",{className:"first-label"},"First, you have to open your webcam."),r.a.createElement("button",{disabled:!i,className:"open-button",onClick:function(){c(1)}},"Open")),s&&r.a.createElement("div",{className:"main-container"},r.a.createElement("h1",{className:"first-label"},"Please allow webcam access to use this application")),!s&&r.a.createElement("div",null,1===b&&r.a.createElement(k,null,r.a.createElement("h1",{className:"text-center"},"1. Capture the background scene ",r.a.createElement("br",null),"(Don't move the camera after the image is captured)"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("button",{className:"open-button",onClick:function(){x(),C()}},"Back"),r.a.createElement("button",{className:"open-button",onClick:C},"Got It !"))),2===b&&r.a.createElement(k,null,r.a.createElement("h1",{className:"text-center"},"2. Choose one of the color to be your invisible cloak color."),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("button",{className:"green-color-button",onClick:N(p)},"GREEN"),r.a.createElement("button",{className:"blue-color-button",onClick:N(w)},"\xa0BLUE\xa0"))),0!==n&&r.a.createElement(O,{handleBack:x,currentStep:n,setCurrentStep:c,selectedChromaColor:g,videoProps:{video:o.current},ref:o})))},x=function(){return r.a.createElement(o.a,{basename:"/greenvisible-cloak-web"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},r.a.createElement(h,null)),r.a.createElement(l.a,{path:"/main"},r.a.createElement(C,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.b11b3c08.chunk.js.map